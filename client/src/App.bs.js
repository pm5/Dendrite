// Generated by ReScript, PLEASE EDIT WITH CARE

import * as Curry from "bs-platform/lib/es6/curry.js";
import * as React from "react";
import * as WarnScreen from "./components/WarnScreen.bs.js";
import * as StartScreen from "./components/StartScreen.bs.js";
import * as MonitorScreen from "./components/MonitorScreen.bs.js";
import * as StateProvider from "./StateProvider.bs.js";
import * as LoadUserScreen from "./components/LoadUserScreen.bs.js";
import * as PairBeaconScreen from "./components/PairBeaconScreen.bs.js";

function App$AppScreen(Props) {
  var match = React.useContext(StateProvider.stateContext);
  var state = match[0];
  var tmp;
  var exit = 0;
  if (typeof state === "number") {
    tmp = state === /* Start */0 ? React.createElement(StartScreen.make, {}) : React.createElement(PairBeaconScreen.make, {});
  } else {
    switch (state.TAG | 0) {
      case /* UserLoaded */1 :
      case /* LoadingUser */3 :
          exit = 1;
          break;
      case /* Monitoring */4 :
          tmp = React.createElement(MonitorScreen.make, {
                beacon: state._0,
                user: state._1
              });
          break;
      case /* WarningUser */5 :
          tmp = React.createElement(WarnScreen.make, {
                beacon: state._0,
                user: state._1,
                neighbor: state._2,
                pathogen: state._3
              });
          break;
      default:
        tmp = React.createElement(PairBeaconScreen.make, {});
    }
  }
  if (exit === 1) {
    tmp = React.createElement(LoadUserScreen.make, {
          beacon: state._0
        });
  }
  return React.createElement(React.Fragment, undefined, tmp);
}

var AppScreen = {
  make: App$AppScreen
};

function App$app(Props) {
  var match = React.useState(function () {
        return /* Start */0;
      });
  var setAppState = match[1];
  var appState = match[0];
  React.useEffect((function () {
          if (typeof appState !== "number") {
            switch (appState.TAG | 0) {
              case /* BeaconPaired */0 :
                  Curry._1(setAppState, (function (param) {
                          return StateProvider.take(/* LoadUser */2, param);
                        }));
                  break;
              case /* UserLoaded */1 :
                  Curry._1(setAppState, (function (param) {
                          return StateProvider.take(/* StartMonitor */3, param);
                        }));
                  break;
              default:
                
            }
          }
          
        }), [appState]);
  return React.createElement(React.Fragment, undefined, React.createElement(StateProvider.make, StateProvider.makeProps([
                      appState,
                      setAppState
                    ], React.createElement(App$AppScreen, {}), undefined)));
}

var app = App$app;

export {
  AppScreen ,
  app ,
  
}
/* react Not a pure module */
